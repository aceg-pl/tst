<!DOCTYPE html>
<html>
<body>

<h2>Fixtures test</h2>
<div id="fx"></div>

<script>
console.log("SCRIPT LOADED");

(async()=>{
const KEY="f1637751ac2e41dc8cfbe1f9492c0a4b",H={"x-apisports-key":KEY};
const box=document.getElementById("fx");

const TOP={
  39:["Manchester City","Arsenal","Liverpool","Manchester United","Chelsea"],
  140:["Real Madrid","Barcelona","Atletico Madrid","Sevilla","Valencia"],
  135:["Inter","Milan","Juventus","Napoli","Roma"],
  78:["Bayern Munich","Borussia Dortmund","RB Leipzig"],
  61:["Paris Saint-Germain","Marseille","Lyon"],
  106:["Legia Warszawa","Lech Poznań","Raków"]
};

for(const [league,teams] of Object.entries(TOP)){
  const r=await fetch(
    `https://v3.football.api-sports.io/fixtures?league=${league}&next=100`,
    {headers:H}
  ).then(r=>r.json()).catch(()=>0);

  if(!r?.response?.length)continue;

  let html=`<div class="fx-league"><h3>League ${league}</h3>`;

  r.response
   .filter(f=>teams.includes(f.teams.home.name)||teams.includes(f.teams.away.name))
   .forEach(f=>{
     html+=`<div class="fx-game">
       <span class="fx-date">${f.fixture.date.slice(0,16).replace("T"," ")}</span><br>
       ${f.teams.home.name} – ${f.teams.away.name}
     </div>`;
   });

  html+="</div>";
  box.insertAdjacentHTML("beforeend",html);
}
})();
</script>

</body>
</html>
