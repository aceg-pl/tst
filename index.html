<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather & Sun Times â€“ Bydgoszcz</title>
</head>
<body>
  <div id="weather">Loadingâ€¦</div>

  <script>
  (()=>{
    const lat=53.1235, lon=18.0084, tz="Europe/Warsaw";
    const out = document.getElementById("weather");
    fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=pressure_msl&daily=sunrise,sunset&timezone=${encodeURIComponent(tz)}`)
      .then(r=>r.json())
      .then(d=>{
        const cw = d.current_weather;
        const temp = cw.temperature;
        const wind = cw.windspeed;
        const wcode = cw.weathercode;
        const desc = wcode<3 ? 'â˜€ï¸' : wcode<50 ? 'â˜ï¸' : wcode<60 ? 'ðŸŒ§ï¸' : 'â˜”ï¸';
        const pressures = d.hourly.pressure_msl;
        const times = d.hourly.time;
        const now = new Date().toISOString().slice(0,19);
        const idx = times.indexOf(now);
        const pressure = idx>=0 ? pressures[idx] : "N/A";
        const sunrise = d.daily.sunrise[0];
        const sunset = d.daily.sunset[0];
        out.innerHTML = `
          ${desc}  ðŸŒ¡ ${temp}Â°C ðŸŒ¬ ${wind} km/h ðŸ’¨ ${pressure} hPa<br>
          ðŸŒ… ${sunrise} ðŸŒƒ ${sunset}
        `;
      })
      .catch(e=>{
        out.textContent = "Failed to load data.";
      });
  })();
  </script>
</body>
</html>
