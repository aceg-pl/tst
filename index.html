<!DOCTYPE html><html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>News Portal</title>

  <!-- ‚úÖ load uPlot correctly -->
  <link rel="stylesheet" href="https://unpkg.com/uplot@1.6.30/dist/uPlot.min.css">
  <script src="https://unpkg.com/uplot@1.6.30/dist/uPlot.iife.min.js"></script>

  <style>
    body{
      margin:0;padding:0;
      font-family:-apple-system,system-ui,Arial;
      background:#f5f5f5;
    }
    .sticky-header{
      position:sticky;top:0;z-index:100;
      background:#f5f5f5;padding:16px 16px 0;
      display:flex;align-items:center;justify-content:center;
      gap:16px;flex-wrap:wrap;
      box-shadow:0 2px 4px rgba(0,0,0,0.05);
      position:relative;
    }
    /* ‚úÖ chart fixed on the far left, not shifting layout */
    #c{
      position:absolute;left:10px;top:10px;
      width:140px;height:70px;flex-shrink:0;
      border-radius:6px;background:#fff;
      box-shadow:0 1px 3px rgba(0,0,0,0.15);
    }
    .sites{
      text-align:center;display:flex;flex-wrap:wrap;
      justify-content:center;gap:6px;
    }
  </style>
</head>

<body>

  <div class="sticky-header">
    <div id="c"></div> <!-- chart on left -->
    <div class="sites" id="siteIcons"></div>
    <div id="searchLine" style="position:relative;display:flex;align-items:center;justify-content:center;max-width:400px;width:100%">
      <input type="search" id="titleSearch" placeholder="Search Titles..." style="width:100%;padding:8px;border-radius:6px;border:1px solid #ccc;font-size:14px;box-sizing:border-box">
      <div id="scrollButtons" style="position:absolute;right:4px;display:flex;gap:8px;user-select:none;font-size:20px;cursor:pointer">
        <div id="pageDownArrow" title="Scroll one page down">‚¨áÔ∏è</div>
        <div id="topArrow" title="Scroll to top">‚è´</div>
      </div>
    </div>
  </div>

<div id="datebar">
  <div id="d"></div>
  <div id="content" style="display:none;">
    <div id="otd"><h2>On this day</h2><div class="mut">loading‚Ä¶</div></div>
    <div id="mv"><h2>Movies</h2><div class="mut">loading‚Ä¶</div></div>
    <div id="al"><h2>Albums</h2><div class="mut">loading‚Ä¶</div></div>
    <div id="ft"><h2>Matches</h2><div class="mut">loading‚Ä¶</div></div>
  </div>
</div>

<div class="block-title">üì∞ Wiadomo≈õci</div><div class="scroll-pane"><div class="feed-list" id="feedListX0">Loading‚Ä¶</div></div>
<div class="block-title">‚öΩÔ∏è Sport</div><div class="scroll-pane"><div class="feed-list" id="feedListX1">Loading‚Ä¶</div></div>
<div class="block-title">üñ•Ô∏è Tech</div><div class="scroll-pane"><div class="feed-list" id="feedListX2">Loading‚Ä¶</div></div>
<div class="block-title">üåé News</div><div class="scroll-pane"><div class="feed-list" id="feedListX3">Loading‚Ä¶</div></div>
<div class="block-title">üé¨ AV</div><div class="scroll-pane"><div class="feed-list" id="feedListX4">Loading‚Ä¶</div></div>

<script>
const sites=[{url:'https://www.onet.pl',d:'onet.pl'},{url:'https://www.wp.pl',d:'wp.pl'},{url:'https://www.interia.pl',d:'interia.pl'},{url:'https://www.gazeta.pl',d:'gazeta.pl'},{url:'https://www.polsatnews.pl',d:'polsatnews.pl'},{url:'https://expressbydgoski.pl',d:'expressbydgoski.pl'},{url:'https://www.rp.pl',d:'rp.pl'},{url:'https://www.newsweek.pl/lista-wydan',d:'newsweek.pl'},{url:'https://edition.cnn.com',d:'cnn.com'},{url:'https://www.bbc.com',d:'bbc.com'},{url:'https://www.reuters.com',d:'reuters.com'},{url:'https://www.flashscore.pl',d:'flashscore.pl'}];
const siteIcons=document.getElementById('siteIcons');
sites.forEach(s=>{let i=document.createElement('img');i.loading='lazy';i.src=`https://www.google.com/s2/favicons?domain=${s.d}&sz=24`;i.onclick=()=>open(s.url,'_blank');siteIcons.appendChild(i);});
const feedsX0=[{url:'https://wiadomosci.onet.pl/.feed'},{url:'https://wiadomosci.gazeta.pl/pub/rss/wiadomosci.htm'},{url:'https://www.polsatnews.pl/rss/wszystkie.xml'},{url:'https://wiadomosci.wp.pl/rss.xml'},{url:'https://wydarzenia.interia.pl/feed'}];
const feedsX1=[{url:'https://www.polsatsport.pl/rss/wszystkie.xml'},{url:'https://www.sport.pl/pub/rss/sport.xml'},{url:'https://www.soccernews.com/category/la-liga/feed/'}];
const feedsX2=[{url:'https://www.theverge.com/rss/index.xml'},{url:'https://www.wired.com/feed/rss'},{url:'https://www.sciencedaily.com/rss/top.xml'}];
const feedsX3=[{url:'https://news.google.com/rss?hl=en-US&gl=US&ceid=US:en'},{url:'https://feeds.bbci.co.uk/news/rss.xml'}];
const feedsX4=[{url:'https://eol-feeds.eonline.com/rssfeed/us/top_stories'},{url:'https://www.ign.com/rss/articles/feed'}];
const proxy1='https://api.allorigins.win/get?url=',proxy2='https://api.codetabs.com/v1/proxy?quest=';

function fR(f,r=1){return fetch(proxy1+encodeURIComponent(f.url)).then(x=>x.json()).then(d=>({ok:1,t:d.contents})).catch(_=>r?fRalt(f,r-1):{ok:0,t:''})}
function fRalt(f,r=1){return fetch(proxy2+encodeURIComponent(f.url)).then(x=>x.text()).then(t=>({ok:1,t})).catch(_=>r?fRalt(f,r-1):{ok:0,t:''})}

function fNR(feeds,id,page=0){
 let el=document.getElementById(id);if(page===0)el.innerHTML='';
 Promise.all(feeds.map(f=>fR(f,1).then(r=>{
   if(!r.ok)return[];
   let p=new DOMParser(),x=p.parseFromString(r.t,'application/xml');
   return Array.from(x.querySelectorAll('item,entry')).map(e=>{
     let t=e.querySelector('title')?.textContent||'No title',
         l=e.querySelector('link')?.textContent||e.querySelector('link')?.getAttribute('href')||'#',
         d=e.querySelector('pubDate')?.textContent||e.querySelector('updated')?.textContent||new Date().toISOString();
     return {t,l,d:new Date(d)};
   });
 }))).then(all=>{
   let items=all.flat().sort((a,b)=>b.d-a.d);
   items.slice(page*20,(page+1)*20).forEach(n=>{
     let a=document.createElement('a');a.href=n.l;a.target='_blank';a.className='feed-item';
     let im=document.createElement('img');im.loading='lazy';im.src=`https://www.google.com/s2/favicons?domain=${new URL(n.l).hostname}&sz=16`;
     let sp=document.createElement('span'),rD=n.d,nD=new Date();
     sp.textContent=' '+((nD-rD)/36e5<24?`${String(rD.getHours()).padStart(2,'0')}:${String(rD.getMinutes()).padStart(2,'0')}`:`${String(rD.getDate()).padStart(2,'0')}/${String(rD.getMonth()+1).padStart(2,'0')}`);
     a.appendChild(im);a.appendChild(document.createTextNode(' '+n.t.slice(0,80)+(n.t.length>80?'‚Ä¶':'')));a.appendChild(sp);
     el.appendChild(a);
   });
   if(items.length>(page+1)*20){
     let btn=document.createElement('button');btn.textContent='Load more';btn.className='loadmore';
     btn.onclick=()=>{btn.remove();fNR(feeds,id,page+1)};el.after(btn);
   }
 });
}

titleSearch.oninput=()=>{let f=titleSearch.value.toLowerCase();document.querySelectorAll('.feed-item').forEach(x=>x.style.display=x.textContent.toLowerCase().includes(f)?'':'none')};
pageDownArrow.onclick=()=>scrollBy({top:innerHeight,behavior:'smooth'});
topArrow.onclick=()=>scrollTo({top:0,behavior:'smooth'});

function loadSeq(){fNR(feedsX0,'feedListX0');setTimeout(()=>fNR(feedsX1,'feedListX1'),400);setTimeout(()=>fNR(feedsX2,'feedListX2'),800);setTimeout(()=>fNR(feedsX3,'feedListX3'),1200);setTimeout(()=>fNR(feedsX4,'feedListX4'),1600);}
loadSeq();

(async()=>{
const tmdbKey="179d23dc4b4a1ba27263fcc2503d5e3d";
const footKey="f1637751ac2e41dc8cfbe1f9492c0a4b";                

const today=new Date(),
ymd=today.toISOString().slice(0,10),
MM=('0'+(today.getMonth()+1)).slice(-2),
DD=('0'+today.getDate()).slice(-2);
const $=id=>document.getElementById(id),set=(id,html)=>($(id).innerHTML=html);

// üîπ Static Polish names-day array
const namesdayArray=[
["Mieszka, Mieczys≈Çawa, Marii","Izydora, Bazylego, Grzegorza","Arlety, Genowefy, Danuty","Tytusa, Anieli, Eugeniusza","Hanny, Szymona, Edwarda","Kacpra, Melchiora, Baltazara","Juliana, Lucjana, Rajmunda","Seweryna, M≈õcis≈Çawa, Juliusza","Marceliny, Marianny, Juliana","Wilhelma, Dobros≈Çawa, Danuty","Honoraty, Teodozjusza, Matyldy","Grety, Arkadiusza, Rajmunda","Bogumi≈Çy, Weroniki, Hilarego","Feliksa, Domos≈Çawa, Niny","Paw≈Ça, Arnolda, Izydora","Marcelego, W≈Çodzimierza, Waldemara","Antoniego, Ro≈õcis≈Çawa, Jana","Piotra, Ma≈Çgorzaty","Henryka, Mariusza, Marty","Fabiana, Sebastiana","Agnieszki, Jaros≈Çawa","Anastazego, Wincentego","Ildefonsa, Rajmunda","Felicji, Franciszka, Rafa≈Ça","Paw≈Ça, Mi≈Çosza, Elwiry","Tymoteusza, Micha≈Ça, Tytusa","Przybys≈Çawa, Anieli, Jerzego","Walerego, Radomira, Tomasza","Zdzis≈Çawa, Franciszka, J√≥zefa","Macieja, Martyny, Teofila","Marceli, Ludwiki, Jana"],
["Brygidy, Ignacego, Seweryna","Marii, Mi≈Ços≈Çawa","B≈Ça≈ºeja, Oskara","Andrzeja, Weroniki, Joanny","Agaty, Adelajdy","Doroty, Bogdana, Paw≈Ça","Ryszarda, Teodora, Romana","Hieronima, Sebastiana, Ireny","Apolonii, Eryki, Cyryla","Elwiry, Jacka, Scholastyki","Lucjana, Olgierda","Eulalii, Rados≈Çawa, Modesta","Grzegorza, Katarzyny","Cyryla, Metodego, Walentego","Jowity, Faustyna, Zygfryda","Danuty, Julianny, Daniela","Aleksego, Zbigniewa, ≈Åukasza","Szymona, Konstancji, Flawiana","Arnolda, Konrada, Marcelego","Leona, Ludomira, Zenobiusza","Eleonory, Fortunata, Roberta","Marty, Ma≈Çgorzaty, Piotra","Romany, Damiana, Polikarpa","Macieja, Bogusza, Sergiusza","Wiktora, Cezarego","Miros≈Çawa, Aleksandra","Gabriela, Anastazji","Romana, Ludomira, Lecha","Lecha, Lutos≈Çawa"],
["Antoniny, Rados≈Çawa, Dawida","Heleny, Halszki, Paw≈Ça","Maryny, Kunegundy, Tycjana","Lucji, Kazimierza, Eugeniusza","Adriana, Fryderyka, Teofila","R√≥≈ºy, Jordana, Agnieszki","Tomasza, Perpetuy, Felicyty","Beaty, Wincentego, Jana","Franciszki, Brunona","Cypriana, Marcela, Aleksandra","Ludos≈Çawa, Konstantyna, Benedykta","Grzegorza, Justyna, Alojzego","Bo≈ºeny, Krystyny","Leona, Matyldy, ≈Åazarza","Longina, Klemensa, Ludwiki","Izabeli, Oktawii, Hilarego","Patryka, Zbigniewa, Gertrudy","Cyryla, Edwarda, Boguchwa≈Çy","J√≥zefa, Bogdana","Klaudii, Eufemii, Maurycego","Lubomira, Benedykta","Katarzyny, Bogus≈Çawa","Pelagii, Oktawiana, Feliksa","Marka, Gabriela, Katarzyny","Marioli, Wieczys≈Çawa, Ireneusza","Larysy, Emanuela, Teodora","Lidii, Ernesta","Anieli, Sykstusa, Jana","Wiktoryna, Helmuta, Eustachego","Anieli, Kwiryna, Leonarda","Beniamina, Dobromierza, Leonarda"],
["Teodory, Gra≈ºyny, Ireny","W≈Çadys≈Çawa, Franciszka, Teodozji","Ryszarda, Pankracego, Ingi","Izydora, Wac≈Çawa","Ireny, Wincentego","Izoldy, Celestyna, Wilhelma","Rufina, Celestyna, Jana","Cezaryny, Dionizego, Julii","Marii, Dymitra, Heliodora","Micha≈Ça, Makarego","Filipa, Leona","Juliusza, Lubos≈Çawa, Zenona","Przemys≈Çawa, Hermenegildy, Marcina","Bereniki, Waleriana, Justyny","Ludwiny, Wac≈Çawy, Anastazji","Kseni, Cecylii, Bernardety","Rudolfa, Roberta","Bogus≈Çawy, Apoloniusza","Adolfa, Tymona, Leona","Czes≈Çawa, Agnieszki, Mariana","Anzelma, Bartosza, Feliksa","Kai, Leonii, Sotera","Jerzego, Wojciecha","Horacego, Feliksa, Grzegorza","Marka, Jaros≈Çawa, Wasyla","Marzeny, Klaudiusza, Marii","Zyty, Teofila, Felicji","Piotra, Walerii, Witalisa","Rity, Katarzyny, Bogus≈Çawa","Mariana, Donaty, Tamary"],
["J√≥zefa, Jeremiasza, Filipa","Zygmunta, Atanazego, Anatola","Marii, Antoniny","Moniki, Floriana, W≈Çadys≈Çawa","Ireny, Waldemara","Judyty, Jakuba, Filipa","Gizeli, Ludmi≈Çy, Benedykta","Stanis≈Çawa, Lizy, Wiktora","Bo≈ºydara, Grzegorza, Karoliny","Izydora, Antoniny, Symeona","Igi, Miry, W≈Çadys≈Çawy","Pankracego, Dominika, Achillesa","Serwacego, Roberta, Glorii","Bonifacego, Dobies≈Çawa, Macieja","Zofii, Nadziei, Izydora","Andrzeja, Jedrzeja, Szymona","Paschalisa, S≈Çawomira, Weroniki","Eryka, Feliksa, Jana","Iwa, Piotra, Celestyna","Bazylego, Bernardyna, Aleksandra","Wiktora, Kryspina, Tymoteusza","Heleny, Wies≈Çawy, Ryty","Iwony, Dezyderego, Kryspina","Joanny, Zuzanny","Grzegorza, Urbana, Magdaleny","Filipa, Pauliny","Augustyna, Juliana, Magdaleny","Jaromira, Justa, Justyny","Magdaleny, Bogumi≈Çy, Urszuli","Ferdynanda, Karola, Jana","Anieli, Petroneli"],
["Justyna, Anieli, Konrada","Marianny, Marcelina, Piotra","Leszka, Tamary, Karola","Kwiryny, Franciszka","Waltera, Bonifacego, Walerii","Norberta, Laurentego, Bogumi≈Ça","Roberta, Wies≈Çawa","Medarda, Maksyma, Seweryna","Pelagii, Dominika, Efrema","Bogumi≈Ça, Ma≈Çgorzaty, Diany","Barnaby, Radomi≈Ça, Feliksa","Janiny, Onufrego, Leona","Lucjana, Antoniego","Bazylego, Elwiry, Micha≈Ça","Wita, Jolanty","Aliny, Benona, Anety","Laury, Marcjana, Alberta","Marka, El≈ºbiety","Gerwazego, Protazego","Diny, Bogny, Florentyny","Alicji, Alojzego","Pauliny, Tomasza, Jana","Wandy, Zenona","Jana, Danuty","Lucji, Wilhelma, Doroty","Jana, Paw≈Ça","Maryli, W≈Çadys≈Çawa, Cyryla","Leona, Ireneusza","Piotra, Paw≈Ça","Emilii, Lucyny"],
["Haliny, Mariana, Marcina","Jagody, Urbana, Marii","Jacka, Anatola, Tomasza","Odona, Malwiny, El≈ºbiety","Marii, Antoniego","Gotarda, Dominiki, Lucji","Cyryla, Estery, Metodego","Edgara, El≈ºbiety, Eugeniusza","Lukrecji, Weroniki, Zenona","Sylwany, Witalisa, Antoniego","Olgi, Kaliny, Benedykta","Jana, Brunona, Bonifacego","Henryka, Kingi, Andrzeja","Ulryka, Bonawentury, Kamila","Henryka, W≈Çodzimierza, Dawida","Mariki, Benity, Eustachego","Anety, Bogdana, Jadwigi","Erwina, Kamila, Szymona","Wincentego, Wodzis≈Çawa, Marcina","Czes≈Çawa, Hieronima, Ma≈Çgorzaty","Daniela, Dalidy, Wawrzy≈Ñca","Marii, Magdaleny","Stwosza, Bogny, Brygidy","Kingi, Krystyny","Walentyny, Krzysztofa, Jakuba","Anny, Miros≈Çawy, Gra≈ºyny","Lilii, Julii, Natalii","Aidy, Marceli, Wiktora","Olafa, Marty, Ludmi≈Çy","Julity, Piotra, Aldony","Ignacego, Lubomira, Heleny"],
["Nadii, Justyna, Juliana","Kariny, Gustawa, Euzebiusza","Lidii, Augusta, Nikodema","Dominika, Protazego, Jana","Oswalda, Marii, Mariana","S≈Çawy, Jakuba, Oktawiana","Kajetana, Doroty, Sykstusa","Cypriana, Emiliana, Dominika","Romana, Ryszarda, Edyty","Borysa, Filomeny, Wawrzy≈Ñca","Klary, Zuzanny, Lecha","Innocentego, Lecha, Euzebii","Diany, Hipolita, Poncjana","Alfreda, Euzebiusza, Maksymiliana","Napoleona, Stelii","Rocha, Stefana, Joachima","≈ªanny, Mirona, Jacka","Ilony, Bronis≈Çawy, Heleny","Boles≈Çawa, Juliana","Bernarda, Samuela, Sobies≈Çawa","Joanny, Kazimiery, Piusa","Cezarego, Tymoteusza","Apolinarego, Filipa","Jerzego, Bartosza, Haliny","Luizy, Ludwika, J√≥zefa","Marii, Aleksandra","Cezarego, J√≥zefa, Moniki","Patrycji, Wyszomira, Augustyna","Beaty, Jana, Sabiny, Racibora","R√≥≈ºy, Szczƒôsnego, Feliksa","Bogdana, Ramony, Rajmunda"],
["Idziego, Bronis≈Çawa","Juliana, Stefana, Wilhelma","Grzegorza, Izabeli, Szymona","Idy, Julianny, Rozalii, R√≥≈ºy","Doroty, Teodora, Wawrzy≈Ñca","Beaty, Eugeniusza","Domos≈Çawy, Melchiora, Reginy","Marii, Adrianny, Serafiny","≈öcibora, Sergiusza, Piotra","≈Åukasza, Aldony, M≈õcis≈Çawa","Jacka, Prota, Dagny, Hiacynta","Gwidona, Radzimira, Marii","Eugenii, Aureliusza, Jana","Roksany, Bernarda, Cypriana","Albina, Nikodema, Marii","Edyty, Korneliusza, Cypriana","Franciszka, Roberta, Justyna","Irmy, Stanis≈Çawa, Ireny","Januarego, Konstancji, Teodora","Filipiny, Eustachego, Euzebii","Jonasza, Mateusza, Hipolita","Tomasza, Maurycego, Joachima","Tekli, Bogus≈Çawa, Linusa","Gerarda, Ruperta, Tomiry","Aurelii, W≈Çadys≈Çawa, Kleofasa","Wawrzy≈Ñca, Kosmy, Damiana","Wincentego, Mirabeli, Justyny","Wac≈Çawa, Tymona, Marka","Micha≈Ça, Gabriela, Rafa≈Ça","Wery, Honoriusza, Hieronima"],
["Danuty, Remigiusza, Teresy","Teofila, Dionizego, S≈Çawomira","Teresy, Heliodora, Jana","Rozalii, Edwina, Franciszka","Placyda, Apolinarego","Artura, Brunona","Marii, Marka, Mirelli","Pelagii, Brygidy, Walerii","Amolda, Dionizego, Wincentego","Pauliny, Danieli, Leona","Aldony, Aleksandra, Dobromiry","Eustachego, Maksymiliana, Edwina","Geralda, Edwarda, Honorata","Liwii, Kaliksta, Bernarda","Jadwigi, Teresy, Florentyny","Gawe≈Ça, Ambro≈ºego","Wiktora, Marity, Ignacego","Juliana, ≈Åukasza","Ziemowita, Jana, Paw≈Ça","Ireny, Kleopatry, Jana","Urszuli, Hilarego, Jakuba","Halki, Filipa, Salomei","Marleny, Seweryna, Igi","Rafa≈Ça, Marcina, Antoniego","Darii, Wilhelminy, Bonifacego","Lucjana, Ewarysta, Damiana","Iwony, Sabiny","Szymona, Tadeusza","Euzebii, Wioletty, Felicjana","Zenobii, Przemys≈Çawa, Edmunda","Urbana, Saturnina, Krzysztofa"],
["Wszystkich ≈öwiƒôtych","Bohdany, Bo≈ºydara","Sylwii, Marcina, Huberta","Karola, Olgierda","El≈ºbiety, S≈Çawomira, Dominika","Feliksa, Leonarda, Ziemowita","Antoniego, ≈ªytomira, Ernesta","Seweryna, Bogdana, Klaudiusza","Aleksandra, Ludwika, Teodora","Leny, Ludomira, Leona","Marcina, Bart≈Çomieja, Teodora","Renaty, Witolda, Jozafata","Mateusza, Izaaka, Stanis≈Çawa","Rogera, Serafina, Wawrzy≈Ñca","Alberta, Leopolda","Gertrudy, Edmunda, Marii","Salomei, Grzegorza, El≈ºbiety","Romana, Klaudyny, Karoliny","Seweryny, Maksyma, Salomei","Anatola, Sedzimira, Rafa≈Ça","Alberta, Janusza, Konrada","Cecylii, Wszemi≈Çy, Stefana","Adelii, Klemensa, Felicyty","Flory, Emmy, Chryzogona","Erazma, Katarzyny","Delfiny, Sylwestra, Konrada","Waleriana, Wirgiliusza, Maksyma","Les≈Çawa, Zdzis≈Çawa, Stefana","B≈Ça≈ºeja, Saturnina","Andrzeja, Maury, Konstantego"],
["Natalii, Eligiusza, Edmunda","Balbiny, Bibianny, Pauliny","Franciszka, Ksawerego, Kasjana","Barbary, Krystiana, Jana","Sabiny, Krystyny, Edyty","Miko≈Çaja, Jaremy, Emiliana","Marcina, Ambro≈ºego, Teodora","Marii, ≈öwiatozara, Makarego","Wies≈Çawa, Leokadii, Joanny","Julii, Danieli, Bogdana","Damazego, Waldemara, Daniela","Dagmary, Aleksandra, Ady","≈Åucji, Otylii","Alfreda, Izydora, Jana","Niny, Celiny, Waleriana","Albiny, Zdzis≈Çawy, Alicji","Olimpii, ≈Åazarza, Floriana","Gracjana, Bogus≈Çawa, Laurencji","Gabrieli, Dariusza, Eleonory","Bogumi≈Çy, Dominika","Tomis≈Çawa, Seweryna, Piotra","Zenona, Honoraty, Franciszki","Wiktorii, S≈Çawomiry, Jana","Adama, Ewy, Eweliny","Anastazji, Eugenii","Dionizego, Szczepana","Jana, ≈ªanety, Maksyma","Teofilii, Godzis≈Çawa","Dawida, Sylwestra, Mariusza"]
];

// function to get today‚Äôs names
function getNamesday(){
  const d=new Date();
  const m=d.getMonth(),day=d.getDate()-1;
  return (namesdayArray[m]&&namesdayArray[m][day])?namesdayArray[m][day]:"";
}
  
$$("d").innerHTML=`
  <b>‚ÜïÔ∏è üìÖ ${ymd} (${today.toLocaleDateString('pl-PL',{weekday:'long'})}) ‚Äî üïäÔ∏è ${getNamesday()||"<span class='mut'>none</span>"} ‚ÜïÔ∏è</b>
  <div id="weather" style="margin-top:4px;font-weight:400;font-size:13px;color:#000"></div>
`;

(()=>{
  const lat=53.1235, lon=18.0084, tz="Europe/Warsaw";

  fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=pressure_msl&daily=sunrise,sunset&timezone=${encodeURIComponent(tz)}`)
  .then(r=>r.json())
  .then(d=>{
    const cw=d.current_weather||{},
          t=cw.temperature??"‚Äî",
          w=cw.windspeed??"‚Äî",
          c=cw.weathercode??0,
          icon=c<3?'‚òÄÔ∏è':c<50?'‚òÅÔ∏è':c<60?'üåßÔ∏è':'‚òîÔ∏è',
          prs=d.hourly.pressure_msl||[],
          times=d.hourly.time||[],
          now=new Date();
    let nearest=0,minDiff=1e9;
    for(let i=0;i<times.length;i++){
      const diff=Math.abs(new Date(times[i])-now);
      if(diff<minDiff){minDiff=diff;nearest=i;}
    }
    const p=prs[nearest]?Math.round(prs[nearest]):"‚Äî",
          sr=(d.daily.sunrise||["‚Äì"])[0].split("T")[1]?.slice(0,5)||"‚Äì",
          ss=(d.daily.sunset||["‚Äì"])[0].split("T")[1]?.slice(0,5)||"‚Äì",
          lp=2551443, newMoon=592500,
          ph=(((now/1000)-newMoon)%lp)/lp<0?(((now/1000)-newMoon)%lp)/lp+1:(((now/1000)-newMoon)%lp)/lp,
          moon=ph<0.03||ph>0.97?"üåë":ph<0.25?"üåí":ph<0.27?"üåì":ph<0.47?"üåî":ph<0.53?"üåï":ph<0.75?"üåñ":ph<0.77?"üåó":"üåò",
          percent=Math.round(ph*100);

    document.getElementById("weather").innerHTML=
      `${icon} ${t}¬∞C ‚Ä¢ üí®${w}km/h ‚Ä¢ üå™Ô∏è${p}hPa ‚Ä¢ üåÖ ${sr}‚Äì${ss} ‚Ä¢ ${moon} ${percent}%`;
  })
  .catch(_=>{
    document.getElementById("weather").textContent="Weather unavailable.";
  });
})();
  
// utility
const j=async(u,o)=>{try{const r=await fetch(u,o);if(!r.ok)throw 0;return await r.json()}catch(e){return null}}
const bullets=(arr,max=8,map=x=>x)=>arr&&arr.length?arr.slice(0,max).map(map).join(" ‚Ä¢ "):"<span class='mut'>none</span>";

// üîπ On this day (sorted oldest‚Üínewest, top 5, year bolded)
j(`https://api.wikimedia.org/feed/v1/wikipedia/en/onthisday/all/${MM}/${DD}`).then(d=>{
 let ev=(d&&d.events)?d.events.sort((a,b)=>a.year-b.year).slice(0,5):[];
 const html=ev.map(x=>{
  const yr=`<b>${x.year}</b>`;
  const txt=x.text.split(" ‚Äì ")[0]||"";
  const link=(x.pages?.[0]?.titles?.normalized)||"";
  return `${yr}: <a href="https://en.wikipedia.org/wiki/${encodeURIComponent(link)}" target="_blank" style="font-weight:400">${txt}</a>`;
  }).join(" ‚Ä¢ ");
 set("otd",`<h2 style="display:inline; margin-right:6px;">On this day</h2>${html||"<span class='mut'>none</span>"}`);
});

// üîπ Movies (bold + extended)
(async()=>{
 if(!tmdbKey){set("mv","<h2>Movies</h2><span class='mut'>add TMDb key</span>");return;}
 const d=await j(`https://api.themoviedb.org/3/discover/movie?api_key=${tmdbKey}&language=en-US&region=US&with_release_type=3|2&primary_release_date.gte=${ymd}&primary_release_date.lte=${ymd}&sort_by=popularity.desc`);
 if(!d||!d.results){set("mv","<h2>Movies</h2><span class='mut'>none</span>");return;}
 const movies=d.results.filter(x=>["en","pl"].includes(x.original_language)).slice(0,8);
 const infos=[];
 for(const m of movies){
   const det=await j(`https://api.themoviedb.org/3/movie/${m.id}?api_key=${tmdbKey}&append_to_response=credits`);
   if(!det)continue;
   const genres=(det.genres||[]).map(g=>g.name).join(", ");
   const dir=(det.credits.crew.find(c=>c.job=="Director")||{}).name||"";
   const cast=(det.credits.cast||[]).slice(0,3).map(c=>c.name).join(", ");
   infos.push(
  `<a href="https://www.themoviedb.org/movie/${m.id}" target="_blank"><b>${m.title}</b></a>` + (genres ? " " + genres.split(", ")[0] : "") + (dir ? " by " + dir : "") + (cast ? `, <i>${cast}</i>` : ""));
 }
 set("mv",`<h2 style="display:inline; margin-right:6px;">Movies</h2>${infos.length?infos.join(" ‚Ä¢ "):"<span class='mut'>none</span>"}`);
})();

// üîπ Albums (bold + artists)
j(`https://musicbrainz.org/ws/2/release/?query=date:${ymd}%20AND%20status:official&fmt=json&limit=15`).then(d=>{
 const seen=new Set,releases=(d&&d.releases||[]).filter(x=>{
   const lang=(x["text-representation"]?.language)||"";
   if(lang && !["eng","pol"].includes(lang))return false;
   const t=(x["release-group"]?.title)||x.title;
   if(seen.has(t))return false; seen.add(t); return t;
});
 const html=bullets(releases,10,x=>{
   const t=(x["release-group"]?.title)||x.title;
   const id=(x["release-group"]?.id)||x.id;
   const artists=(x["artist-credit"]||[]).map(a=>a.name).join(", ");
   return `<a href="https://musicbrainz.org/release-group/${id}" target="_blank"><b>${t}</b></a>${artists?" "+artists:""}`;
 });
 set("al",`<h2 style="display:inline; margin-right:6px;">Albums</h2>${html}`);
});

// üîπ Matches (Scorebat ‚Äì free, no key)
j("https://www.scorebat.com/video-api/v3/").then(d=>{
  const m=d.response||[];
  const html=m.slice(0,10).map(x=>`${x.title.replace(' vs ',' ‚öΩ ')} (${x.competition})`).join(" ‚Ä¢ ");
  set("ft",`<h2 style="display:inline; margin-right:6px;">Matches</h2>${html||"<span class='mut'>none</span>"}`);
});

$("d").onclick=()=>{
  const c=$("content");
  c.style.display=c.style.display==="none"?"block":"none";
};

})();

// --- Tiny pressure/precip chart (left of header) ---
setTimeout(async()=>{
  const c=document.getElementById("c");if(!c)return;
  const lat=53.2220,lon=18.0544;
  const q=new URLSearchParams({latitude:lat,longitude:lon,hourly:"pressure_msl,precipitation",past_days:"7",forecast_days:"7",timezone:"auto"});
  const r=await fetch("https://api.open-meteo.com/v1/forecast?"+q);
  if(!r.ok){c.textContent="err";return;}
  const j=await r.json(),t=j.hourly.time||[],P=j.hourly.pressure_msl||[],R=j.hourly.precipitation||[];
  if(!t.length){c.textContent="nodata";return;}
  const x=t.map(e=>new Date(e).getTime()),yP=P.map(Number),yR=R.map(Number),now=Date.now();
  const vL=x.filter(e=>new Date(e).getHours()==0);
  const dayLines={hooks:{draw:u=>{const ctx=u.ctx,{top,height,left,width}=u.bbox;
    ctx.save();ctx.strokeStyle="#777";ctx.lineWidth=.8;ctx.setLineDash([2,2]);
    vL.forEach(ts=>{const X=u.valToPos(ts,"x",1);if(X>left&&X<left+width){ctx.beginPath();ctx.moveTo(X,top);ctx.lineTo(X,top+height);ctx.stroke();}});
    ctx.restore();}}};
  const nowLine={hooks:{draw:u=>{const X=u.valToPos(now,"x",1),ctx=u.ctx,{top,height,left,width}=u.bbox;
    if(X<left||X>left+width)return;ctx.save();ctx.strokeStyle="#e74c3c";ctx.setLineDash([3,3]);
    ctx.beginPath();ctx.moveTo(X,top);ctx.lineTo(X,top+height);ctx.stroke();ctx.restore();}}};
  const ref=(lv,c="#008000")=>({hooks:{draw:u=>{const ctx=u.ctx,{top,height,left,width}=u.bbox;
    ctx.save();ctx.strokeStyle=c;ctx.setLineDash([4,3]);
    lv.forEach(v=>{const Y=u.valToPos(v,"p",1);if(Y>top&&Y<top+height){ctx.beginPath();ctx.moveTo(left,Y);ctx.lineTo(left+width,Y);ctx.stroke();}});
    ctx.restore();}}});
  const rMax=Math.max(1,...yR.filter(v=>v!=null));
  new uPlot({
    width:c.clientWidth,height:c.clientHeight,
    scales:{x:{time:1},p:{auto:1},r:{range:[0,rMax]}},
    legend:{show:0},
    axes:[
      {show:1,size:20,space:36,splits:(u,v)=>v.filter((_,i)=>i%(Math.ceil(v.length/4)||1)==0),
       values:(u,v)=>v.map(e=>{const d=new Date(e);return`${d.getDate()}-${String(d.getHours()).padStart(2,"0")}`;}),
       font:"9px system-ui"},
      {show:1,scale:"p",size:6,values:()=>[],ticks:{show:0},grid:{show:1,stroke:"rgba(0,0,0,0.06)"}},
      {show:1,scale:"r",side:1,size:6,values:()=>[],ticks:{show:0},grid:{show:0}}
    ],
    series:[{}, {scale:"p",stroke:"#ff8800",width:1,fill:"rgba(255,136,0,0.1)",points:{show:0}},
                {scale:"r",stroke:"#2b6cb0",width:1,points:{show:0}}],
    plugins:[nowLine,ref([1013]),dayLines]
  },[x,yP,yR],c);
},300);

</script></body></html>
